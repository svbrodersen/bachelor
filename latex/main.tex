% ! TeX Program = lualatex
\documentclass[a4paper, 12pt]{article}
\usepackage{newclude}
\usepackage{KUstyle}
\usepackage{bytefield}
\usepackage{amsmath}
\usepackage{subfiles}
\usepackage{titlepic}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{lipsum}
\usepackage[english]{babel}
\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{multirow}
\usepackage{caption}
\usepackage{subcaption}

\usepackage[backend=biber, style=numeric]{biblatex}
\usepackage{csquotes}
\addbibresource{refs.bib}

\usepackage[automake]{glossaries-extra}
\makeglossaries
\loadglsentries{glossaries}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}
\interfootnotelinepenalty=10000
\input{setup.tex}

\AddToHook{cmd/section/before}{\clearpage}
\makeatletter
\newcommand\footnoteref[1]{\protected@xdef\@thefnmark{\ref{#1}}\@footnotemark}
\makeatother
\lstset{basicstyle=\ttfamily\scriptsize}

\ptype{Bachelors Thesis}
\author{Simon Vinding Brodersen}
\title{RISC-V based computers in the data center}
\advisor{Advisor: Philippe Bonnet}
\date{\today}

\setcounter{tocdepth}{2}

\hbadness=99999  % or any number >=10000

\newcommand{\memsection}[4]{
\bytefieldsetup{bitheight=#3\baselineskip}    % define the height of the memsection
\bitbox[]{10}{
\texttt{#1}     % print end address
\\ \vspace{#3\baselineskip} \vspace{-2\baselineskip} \vspace{-#3pt} % do some spacing
\texttt{#2} % print start address
}
\bitbox{16}{#4} % print box with caption
}

\begin{document}
\maketitle
\pagestyle{plain} % not to get a header in the introduction pages

\tableofcontents
\newpage

\subfile{./sections/Introduction.tex}
\subfile{./sections/Background.tex}
\subfile{./sections/Design.tex}
\subfile{./sections/Implementation.tex}
\subfile{./sections/Evaluation.tex}
\subfile{./sections/Conclusion.tex}

\newpage
\printbibliography[heading=bibintoc, title={References}]

\newpage
\printglossary[type=main,style=long,nonumberlist]
\glsaddall

\end{document}
